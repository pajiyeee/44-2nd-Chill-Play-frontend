# Wecode 44기 2nd project
> Team : Chill & Play

<br/>
<br /> 

<img src="https://user-images.githubusercontent.com/124162355/236394363-73e1e200-3fe6-4e1b-b7f0-a7f54dc42fbc.png" width="830px" alt="cover-chill play"></img>

## Chill & Play 멤버
#### FrontEnd

- <a href="https://github.com/Hyomins-013">신효민<img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white&link=https://github.com/hongyeollee"/></a>
- <a href="https://github.com/pajiyeee">박지연<img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white&link=https://github.com/hongyeollee"/></a>
- <a href="https://github.com/ggkim0614">김정환<img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white&link=https://github.com/hongyeollee"/></a>


#### BackEnd

- <a href="https://github.com/thornewater">김원종<img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white&link=https://github.com/hongyeollee"/></a>
- <a href="https://github.com/lsg622">임성근<img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white&link=https://github.com/hongyeollee"/></a>
- <a href="https://github.com/ggkim0614">왕광현<img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white&link=https://github.com/hongyeollee"/></a>
- <a href="https://github.com/wkh24">최상현<img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white&link=https://github.com/hongyeollee"/></a>

<br/>

<div><h2>Stacks</h2></div>

  <img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white"> <img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white"> <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black"> <img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=black"> <img src="https://img.shields.io/badge/styledcomponents-DB7093?style=for-the-badge&logo=styledcomponents&logoColor=white"> 
 

<img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white"> <img src="https://img.shields.io/badge/.ENV-ECD53F?style=for-the-badge&logo=.ENV&logoColor=black"> <img src="https://img.shields.io/badge/node.js-339933?style=for-the-badge&logo=Node.js&logoColor=white"> <img src="https://img.shields.io/badge/express-000000?style=for-the-badge&logo=express&logoColor=white"> <img src="https://img.shields.io/badge/axios-5A29E4?style=for-the-badge&logo=axios&logoColor=white"> <img src="https://img.shields.io/badge/Postman-FF6C37?style=for-the-badge&logo=Postman&logoColor=white"> <img src="https://img.shields.io/badge/Jest-C21325?style=for-the-badge&logo=Jest&logoColor=white"> <img src="https://img.shields.io/badge/amazonaws-232F3E?style=for-the-badge&logo=amazonaws&logoColor=white"> <img src="https://img.shields.io/badge/amazonec2-FF9900?style=for-the-badge&logo=amazonec2&logoColor=white"> <img src="https://img.shields.io/badge/docker-2496ED?style=for-the-badge&logo=docker&logoColor=white">


<img src="https://img.shields.io/badge/trello-61DAFB?style=for-the-badge&logo=trello&logoColor=black"> <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white"> <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white"> <img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=Slack&logoColor=white">

</div>

<br/> 
<br/>

## 프로젝트 기간
2023.04.24(월) ~ 05.04(목) 총 11일

<br /> 
<br /> 


## About 'muse'

<br/>

<img src="https://user-images.githubusercontent.com/124162355/236395178-542d4907-b12f-41f1-87e8-fdbc88df8fff.png" width="200px" alt="cover-chill play"></img>

뮤지컬은 대중적으로 많은 사람들이 관심을 가지고 있는 예술의 한 분야입니다.   
관람객의 오감을 자극하고 힐링과 영감을 준다는 의미에서 저희 웹서비스를 '뮤즈'라고 지었습니다.   
'뮤즈'를 통해 인기 있는 작품을 추천받고, 빠르고 간편한 절차를 통해 뮤지컬을 예매할 수 있습니다.

<br/>
<br/>

## Page

<br/>

#### 뮤즈에서 뮤지컬 티켓팅 Flow ####

```text
카카오로 로그인하기 -> 메인 둘러보기 -> 챗봇을 통해 뮤지컬 추천받기 -> 뮤지컬 리스트에서 원하는 순서대로 뮤지컬 보기 ->   
보고 싶은 뮤지컬 상세정보 확인하기 -> 뮤지컬 예매하기 -> 결제하기 -> 마이페이지에서 예매 내역 확인하기 -> 관람한 뮤지컬 포토리뷰 작성하기
```

<br/>

### ⓿ Nav ###
- 로그인/로그아웃 기능으로 TOKEN 존재여부에 따라 텍스트가 바뀌도록 구현했습니다.
- 바로 뮤지컬을 검색해서 상세정보를 확인할 수 있도록 Fetch API를 통해 백엔드와 통신하여 필터된 검색 리스트를 출력합니다.
- 하단 우측에 예매하기 플로팅 버튼이 있어야하는 페이지만 나타날 수 있도록 구현하였습니다.

<img src="https://user-images.githubusercontent.com/124162355/236441532-b8737b58-cc44-4a12-a007-4719860af7dc.gif" width="600px" alt="nav"></img> 

<br/>

### ➊ 로그인 ###
#### 신속하게 원하는 뮤지컬 티켓 예매가 가능하도록 소셜 로그인 API 활용  
- 로고를 클릭할 시, 홈으로 돌아가는 기능을 제공합니다.
- 대중적으로 많이 사용하는 카카오로 로그인할 수 있도록 카카오 API를 연동했습니다.
- REST API를 활용하여 카카오로부터 인가코드를 받아 백엔드에 넘겨주면, 도용과 해킹을 방지하기 위해 백엔드에서 다시 '뮤즈'플랫폼 전용 토큰을 발급 받아 로그인됩니다.
- 로그인이 승인되는 시간이 길어질 경우 사용자의 이탈률을 줄일 수 있도록 로딩 마이크로 모션을 추가했습니다.


<img src="https://user-images.githubusercontent.com/124162355/233985374-3ca04f1b-af87-41a1-bed2-0ea3d328e3c7.png" width="600px" alt="로그인"></img>  
<img src="https://user-images.githubusercontent.com/124162355/233910607-7451d224-7f5f-428a-9e73-ad79e3f26aa4.png" width="600px" alt="로그인"></img>  
<img src="https://user-images.githubusercontent.com/124162355/233910614-d9ac5f92-5a30-4a51-8f63-77214d8006b8.png" width="600px" alt="로그인"></img>  

<br/>

### ➋ 메인 ###
#### 영상과 이미지로 생동감을 더하여 뮤지컬을 홍보하는 메인 화면
- 사용자가 처음 사이트 진입 시, 뮤지컬에 대한 관심도를 높일 수 있도록 상단 배너에 다양한 뮤지컬 홍보영상과 이미지로 캐러셀 UI를 구현했습니다.  
  Arrow 버튼을 클릭하지 않아도 일정한 속도로 자동 재생이 됩니다.
- 상단 배너와 함께 인기 많은 뮤지컬 차트를 보여줄 수 있도록 백엔드와 fetch API 활용하여 데이터를 출력합니다.
- 차트에 마우스를 올리면, 해당 뮤지컬을 예매하거나 상세페이지로 이동할 수 있는 동적 라우팅을 적용했습니다.

![main](https://user-images.githubusercontent.com/124162355/236403232-7baeb901-a051-4b22-8bb6-353a2671993e.gif)

<br/>

### ➌ 챗봇 ###
#### 메인 화면 하단에 상시로 떠있는 뮤지컬 추천 챗봇
- Flow
  화면 좌측 하단 챗봇 팽창 버튼 클릭시 아래와 같은 플로우를 따릅니다.
  ```text
  추천 요청/거부 => (추천 요청 클릭 시)4가지 장르 추천하는 선택지 제시 => 추천한 선택지 중 선택한 뮤지컬에 해당하는 상세 페이지로 이동
  ```
- 모든 프롬트 및 결과는 상수 데이터를 이용하여 서버와의 응답과는 무관하도록 구현되었습니다.

<img src="https://user-images.githubusercontent.com/37966668/235456273-509fc6c2-a414-4222-897f-de0f47e79fab.png" width="600px" alt="챗봇"></img>  
<img src="https://user-images.githubusercontent.com/37966668/235456293-d038c596-ec52-44e7-a1b4-be9d8230af51.png" width="600px" alt="챗봇"></img>  
<img src="https://user-images.githubusercontent.com/37966668/235456312-697f8d51-4725-4c72-8833-2ba83b30e45a.png" width="600px" alt="챗봇"></img>

<br/>

### ➍ 리스트 ###
#### 상영하거나 상영 예정작인 뮤지컬을 필터 적용하여 볼 수 있는 뮤지컬 리스트
- Fetch API를 통해 백엔드에서 준비한 Lists들을 map() 메서드를 활용해 출력됩니다.
- 연령별, 개봉일 오름차순 & 내림차순, 예매율순(Default) 중 원하는 필터 옵션을 적용시켜 볼 수 있도록 fetch API 통신을 통해 쿼리문을 활용했습니다.
- 컨텐츠 영역 상단 왼쪽에 상영 예정작만 보기 or 상영 예정작과 현재 상영작 모두 보기 옵션을 제공합니다.   
  이중으로 필터 옵션을 적용시킬 수 있어서 사용자가 관람하길 원하는 뮤지컬을 좁혀 나갈 수 있도록 리스트를 보여줍니다.
- 상영 예정작엔 뮤지컬의 개봉날짜와 현재 날짜를 비교하여 D-Day 를 보여줍니다.  
  백엔드에서 보내준 상영시작일을 subString() 메서드와 JavaScript 내장 메서드인 new Date(), if문을 활용해 날짜를 계산하여 값을 출력합니다.
  
<img src="https://user-images.githubusercontent.com/124162355/236428260-3996b948-08b8-4061-88f8-c6448b8ad632.gif" width="600px" alt="예매"></img>
  
 
<br/>

### ➎ 상세 ###
- 상단에 프론트엔드에서 Mock Data를 준비해 해당 뮤지컬의 홍보 영상을 보여줌으로써 마케팅 효과를 더했습니다.
- Fetch API통신에서 API주소 End Point에 해당 페이지의 정보가 출력되도록 동적 라우팅 기능을 사용했습니다.
- 예매율을 차트를 통해 시각적으로 한 눈에 보여줄 수 있도록 Chart.js 라이브러리를 사용했습니다.
- 캐러셀을 이용해 한 스크린 안에서 뮤지컬 스틸 컷을 여러 장 볼 수 있도록 구현했습니다.

<img src="https://user-images.githubusercontent.com/124162355/236429594-c1ae6bdd-5da3-4951-8cee-3496b6d238d6.gif" width="600px" alt="예매"></img>

<br/>

### ❻ 예매 ###
- Flow
  티켓 예매 페이지는 아래와 같은 플로우를 따릅니다.
  ```text
  뮤지컬 선택 => 2. 상영관 선택 => 3. 날짜 및 상영 시간 선택(default값은 오늘) => 4. 좌석 수 및 자리 선택
  ```
  
#### 뮤지컬 선택/ 상영관 선택 / 날짜 선택 / 공연시간 선택
- 뮤지컬, 상영관, 공연시간, 날짜를 선택하면 해당 정보값을 zustand를 사용하여 스토어에 저장하고,   
  주문창 하단에 떠있는 status bar, 좌석 선택으로 넘어갈 시 상단에 떠있을 뮤지컬 정보값에 사용할 수 있도록 구현하였습니다.
- 맵핑된 값들과 store에 저장된 값을 대조해, 현재 선택되어 있는 값에 하이라이트됩니다.
- date-fns 라이브러리를 사용한, 주 단위를 보여주는 달력을 구현하였습니다.   
  오늘 날짜가 포함된 주의 이전 주로 이동하려는 시도가 있는 경우를 대비해, 이동과 클릭이 불가능한 상태로 출력합니다.
- 모든 선택지를 선택하여 조건을 만족할 시, '좌석 선택하기' 버튼이 활성화됩니다.
- 사용자가 다시 선택할 경우를 생각하여 초기화할 수 있는 '처음부터 다시하기' 버튼을 구현했습니다.


#### 좌석 선택
- 좌석 수량을 조절하여, 카운트한 수에 따라 좌석 선택이 가능합니다.
- 이미 예매된 좌석들은 클릭이 불가능한 상태로 출력됩니다.
- 좌석마다 행열값을 부여하여 고유의 키값을 갖고 1~3열까지는 VIP석으로 스타일과 가격이 다르게 맵핑되도록 구현하고, 총 가격이 계산되어 하단에 출력됩니다.
- 선택한 좌석값은 토글이 ON되어 중복으로 출력되는 것을 방지했습니다.


#### 주문 과정을 보여주는 스테이터스 바 예매창 하단에 구현
- 주문 과정 중 선택된 조건들을 전역에서 읽을 수 있는 스토어에 저장해, 선택될 때마다 스테이터스 바에 출력됩니다.
- 뮤지컬, 상영관, 날짜, 상영 시간 선택마다 쿼리 스트링을 사용하여 엔드포인트에 값을 반영하여 원하는 조건을 구매페이지에 보내어지도록 구현했습니다.

<img src="https://user-images.githubusercontent.com/124162355/236441990-6bb15faf-cb02-4a4c-b690-6b074eaa440b.gif" width="600px" alt="예매"></img>


<br/>

### ➐ 결제 ###
 
#### 외부 결제 API를 더한 간편 결제
- 티켓 구매하려는 유저가 선택한 값을 확인할 수 있는 정보값이 화면 상단에 출력됩니다.
- 사용자가 선택한 예매정보를 서버가 아닌 예매페이지에서 최종 CTA버튼인 '결제하기' 버튼을 눌렸을 시 sessionStorage에 저장한 뒤, 데이터를 활용합니다.
- Radio 체크버튼으로 사용자가 결제방식을 선택할 수 있게 하여 해당하는 값에 따라 하단 결제영역을 노출시키고,   
  측면 결제정보 영역에 결제방식을 출력하여 재확인이 가능합니다.
- 결제방식과 약관동의를 체크하고 결제하기 버튼을 누르면 MockUp 결제 API를 제공하는 Toss페이먼츠 함수가 실행됩니다.
- 성공 시, fetch API를 통해 사용자가 예매한 내역을 담아 백엔드에 보내고,   
  결제 실패 시, .catch promise를 사용해 결제 취소 사유를 알 수 있도록 알럿창을 구현했습니다.

<img src="https://user-images.githubusercontent.com/125179082/235449558-2ab78521-8899-4275-a5b5-cf8d4218de8c.gif" width="600px" alt="마이"></img>

<br/>

### ➑ 마이페이지 ###

#### 프로필 확인  
카카오 계정의 프로필과 유저네임이 화면 상단에 노출되어 마이페이지 공간만의 친근함과 특별함을 제공합니다.
 
#### 예매한 티켓
- '예매한 티켓' 탭에서는 구매내역 중 가장 최근 구매한 티켓이 보여집니다.  
 실제로 티켓을 받는 듯한 사용자 경험을 더하기 위해 framer-motion라이브러리를 이용하여 봉투를 클릭 시,  
 예매한 티켓이 나오는 모션이 동작합니다.
- 컨텐츠 상단 우측에 '티켓 이미지로 저장하기' 버튼을 더하여 html2canvas 라이브러리를 사용해   
  티켓이미지가 다운로드되는 기능을 만들었습니다.
  
#### 결제 내역
- '결제 내역' 탭엔 이제까지 유저가 구매한 티켓 내역을 확인할 수 있도록 rc-collapse 라이브러리를 사용하여 데이터를 출력합니다.
- 각 예매내역을 클릭할 시, 아코디언 형식으로 상세정보 보기가 가능합니다.

<img src="https://user-images.githubusercontent.com/124162355/236439478-6538699d-59f1-453b-a5f8-25d9a9ed7a55.gif" width="600px" alt="마이"></img>


<br/>

### ❾ 포토리뷰 ###

#### 뮤지컬 예매를 고민하는 유저를 위한 포토 리뷰를 남길 수 있는 컨텐츠
- 신뢰도를 높이기 위해 해당하는 뮤지컬을 관람한 이력이 있는 사용자만 리뷰 남길 수 있도록 fetch API 활용하여 통신하여 구현했습니다.
- 이미지 파일을 업로드하여 원하는 이미지를 선택했는지에 대한 미리보기 기능 제공합니다.
- 관람한 뮤지컬에 대한 평가를 수치화할 수 있는 리뷰 별점 기능 구현했습니다.
- 페이징 쿼리(offset, limit)를 활용하여 더보기 버튼 클식 시, 리뷰 리스트 누적되어 출력되어집니다.
- 사용자가 쓴 리뷰에 한해 DELETE 메서드를 활용하여 삭제 기능 구현했습니다.

![포토리뷰](https://user-images.githubusercontent.com/124162355/236424765-9debe49a-e130-499a-a34c-6ee1ef1d58f5.gif)

